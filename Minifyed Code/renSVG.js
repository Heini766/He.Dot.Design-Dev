export class SVG{node=document.createElementNS("http://www.w3.org/2000/svg","svg");constructor(e){configureElement(this.node,e)}addNodes(e){"function"==typeof e&&(e=e()),e=Array.isArray(e)?e:[e],this.childNodes||(this.childNodes=new Map),e.forEach(e=>{this.node.appendChild(e.node);let t=e.node.getAttribute("id");this.childNodes.set(t,e)})}remove(e){e=Array.isArray(e)?e:[e];let t=this.childNodes;e.forEach(e=>{t&&t.get(e)?(t.get(e).node.remove(),t.delete(e)):console.error(`can't remove unrecognised childID node - ${e}`)})}ren(e,t,n){let o=!0;n&&(o=!!n.archive&&n.archive);let i=new SVGElement(e,t);if(i.addNodes=this.addNodes.bind(i),i.remove=this.remove.bind(i),o){this.archive||(this.archive=new Map);let r=i.node.getAttribute("id");r?this.archive.set(r,i):this.archive.set(`shape${this.archive.size+1}`,i)}return i}}class SVGElement{constructor(e,t){this.node=document.createElementNS("http://www.w3.org/2000/svg",e),configureElement(this.node,t)}}function configureElement(e,t){if(t)for(let[n,o]of Object.entries(t))"nodes"===n&&Array.isArray(o)?o.forEach(t=>t&&e.appendChild(t.node)):"content"===n?e.innerHTML=o:e.setAttribute(n,o)}function createBezierPath(e,t,n,o=!1){if(!e.length)return"";let i="";i+=`M ${e[0][0]},${e[0][1]}`;for(let r=1;r<e.length;r++){let d=e[r-1],s=n[r-1],$=e[r],a=t[r],h=d[0]+s[0],l=d[1]+s[1],c=$[0]+a[0],u=$[1]+a[1],v=$[0],_=$[1];i+=` C ${h},${l} ${c},${u} ${v},${_}`}if(o&&e.length>1){let f=e[e.length-1],T=n[e.length-1],g=e[0],m=t[0],p=f[0]+T[0],x=f[1]+T[1],w=g[0]+m[0],E=g[1]+m[1],N=g[0],A=g[1];i+=` C ${p},${x} ${w},${E} ${N},${A}`,i+=" Z"}return i}export function genPathData(e,t=[],n=!1){let o=Array.isArray(t)&&t.length>0?t:[{vtx:[0,0],inT:[0,0],outT:[0,0]},{vtx:[0,50],inT:[0,0],outT:[0,0]}],i={nodes:new Map,_needsUpdate:!0,_node:null};function r(){i._needsUpdate&&(i.d=createBezierPath(Array.from(i.nodes.values()).map(e=>e.vtx),Array.from(i.nodes.values()).map(e=>e.inT),Array.from(i.nodes.values()).map(e=>e.outT),n),i._node?.tagName==="path"&&i._node.setAttribute("d",i.d),i._needsUpdate=!1)}return e&&"string"==typeof e?[i._node]=document.querySelectorAll(e):e?.tagName&&(i._node=e),o.forEach((e,t)=>{let n=`node${t+1}`;i.nodes.set(n,{vtx:e.vtx||[0,0],inT:e.inT||[0,0],outT:e.outT||[0,0],set(e){if(!e)return;let t=i.nodes.get(n),o=!1;e.vtx&&(e.vtx[0]!==t.vtx[0]||e.vtx[1]!==t.vtx[1])&&(t.vtx=e.vtx,o=!0),e.inT&&(e.inT[0]!==t.inT[0]||e.inT[1]!==t.inT[1])&&(t.inT=e.inT,o=!0),e.outT&&(e.outT[0]!==t.outT[0]||e.outT[1]!==t.outT[1])&&(t.outT=e.outT,o=!0),o&&(i._needsUpdate=!0,r())}})}),r(),i._node,i}